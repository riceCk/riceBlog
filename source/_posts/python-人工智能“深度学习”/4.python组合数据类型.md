---
title: 4.Python组合数据类型
categories: python
tags: python
date: 2020-06-29 20:29:00
---
# 组合数据类型
# 序列类型
Python语言中有很多数据类型都是序列类型，其中比较重要的是**str（字符串）**、**tuple（元祖）**和**list（列表）**
元祖是包含0个或多个数据项的不可变序列类型
列表则是一个可以修改数据项的序列类型，使用也最灵活
```bash
# 列表
a = [1, 2, 3]
a[1] = 4
# 元祖
b = (1, 2, 3)
b[1] = 2 # 报错
```
## 序列方法
|操作符|描述|
|:---:|:---:|
|x in s| 如果x是s的元素，返回True，否则返回False|
|x not in s |如果x不是s的元素，返回True，否则返回False|
|s + t |连接s和t (跟numpy区别）|
|s * n 或 n * s| 将序列s复制n次|
|s[i]| 索引，返回序列的第i个元素|
|s[i: j]| 分片，返回包含序列s第i到j个元素的子序列（不包含第j个元素）|
|s[i: j: k]| 步骤分片，返回包含序列s第i到j个元素以j为步数的子序列|
|len(s)| 序列s的元素个数（长度）|
|min(s) |序列s中的最小元素|
|max(s) |序列s中的最大元素|
|s.index(x[, i[, j]]) |序列s中从i开始到j位置中第一次出现元素x的位置|
|s.count(x)| 序列s中出现x的总次数|

## 列表类型和操作
列表（list）包含0个或多个对象引用的有序序列，属于序列类型。与元祖不用，列表的长度和内容都是可变的，可自由对列表中数据项进行**增加、删除或替换**。列表没有长度限制元素类型可以不同，使用非常灵活

### 列表的append和list函数
列表用**中括号[]表示，也可以通过list()函数将其他类型转化成功列表。直接使用list()函数会返回一个空列表
```bash
ls = []
ls.append(0)
ls.append('ab')
# [0, 'ab']
list({'a', 'b', }) # ['b', 'a']
list(('a', 'b', )) # ['a', 'b']
```
### 列表类型的操作
| 函数或方法 | 描述 |
| :----: | :----: |
|ls[i] = x |替换列表ls第i数据项为x|
|ls[i: j] = lt |用列表lt替换列表ls中第i到j项数据（不含第j项，下同）|
|ls[i: j: k] = lt| 用列表lt替换列表ls中第i到j以k为步的数据|
|del ls[i: j]| 删除列表ls第i到j项数据，等价于ls[i: j]=[]|
|del ls[i: j: k]| 删除列表ls第i到j以k为步的数据|
|ls += lt或ls.extend(lt) |将列表lt元素增加到列表ls中|
|ls *= n | 更新列表ls，其元素重复n次|
|ls.append(x) |在列表ls最后增加一个元素x|
|ls.clear() |删除ls中所有元素|
|ls.copy() |生成一个新列表，复制ls中所有元素|
|ls.insert(i, x) |在列表ls第i位置增加元素x|
|ls.pop(i) |将列表ls中第i项元素取出并删除该元素|
|ls.remove(x)| 将列表中出现的第一个元素x删除|
|ls.reverse(x) |列表ls中元素反转|

#### ls[n: m]方法
```bash
ls = list(range(5))
# [0, 1, 2, 3, 4]
ls[1:3] = [3, 4, 5]
# [0, 3, 4, 5, 3, 4]
ls[4] = 'good'
# [0, 3, 4, 5, 'good', 4]
```
### 列表和lambad混合操作
#### map方法
```bash
ls = list(range(5))
# [0, 1, 2, 3, 4]
nls = map(lambda x: x * x, ls)
list(nls)
# [0, 1, 4, 9, 16]

```
#### reduce
```bash
from functools import reduce
ls = list(range(5))
print(reduce(lambda x, y: x * y + 1, ls))
# (((1 * 2 + 1) * 3 + ) * 4 + 1) * 5 + 1
```
#### filter过滤器
```bash
ls = list(range(9))
ls = filter(lambda x: x % 2 == 0, ls)
print(list(ls))
# [0, 2, 4, 6, 8]
```


# 集合类型
集合类型与**数学中集合**的概念一致，即包含0个或多个数据项的无序组合。集合中元素不可重复，元素类型只能是固定数据类型，例如：整数、浮点数、字符串、元祖等，列表、字典和集合类型本身都是可变数据类型，不能作为集合的元素出现，集合用大括号({})表示，可以赋值语言生成一个集合
```bash
s={1, 2, 3}
```
## 使用集合去除重复元素
```bash
s = 'hello'
set(s) 
# {'h', 'e', 'l', 'o'}
l = [1, 3, 3, 4, 4, 2, 0]
l_n = list(set(l))
#   [0, 1, 2, 3, 4]
```
## 集合操作符
| 操作符 | 描述 |
| :---: | :---: |
|S – T 或 S.difference(T) | 返回一个新集合，包括在集合S中但不在集合T中的元素|
|S-=T或S.difference_update(T)| 更新集合S，包括在集合S中但不在集合T中的元素|
|S & T或S.intersection(T)| 返回一个新集合，包括同时在集合S和T中的元素|
|S&=T或S.intersection_update(T) |更新集合S，包括同时在集合S和T中的元素。|
|S^T或s.symmetric_difference(T) |返回一个新集合，包括集合S和T中元素，但不包括同时在其中的
元素|
|S=^T或s.symmetric_difference_update(T)| 更新集合S，包括集合S和T中元素，但不包括同时在其中的元素|
|S|T或S.union(T) |返回一个新集合，包括集合S和T中所有元素|
|S=|T或S.update(T)| 更新集合S，包括集合S和T中所有元素|
|S<=T或S.issubset(T) |如果S与T相同或S是T的子集，返回True，否则返回False，可以用 S<T判断S是否是T的真子集|
|S>=T或S.issuperset(T)| 如果S与T相同或S是T的超集，返回True，否则返回False，可以用S>T判断S是否是T的真超集|

## 集合类型10个操作函数或方法
| 函数或方法 | 描述 |
| :---: | :---: |
|S.add(x) | 如果数据项x不在集合S中，将x增加到s|
|S.clear() | 移除S中所有数据项|
|S.copy() | 返回集合S的一个拷贝|
|S.pop() | 随机返回集合S中的一个元素，如果S为空，产生KeyError异常|
|S.discard(x) | 如果x在集合S中，移除该元素；如果x不在，不报错|
|S.remove(x) | 如果x在集合S中，移除该元素；不在产生KeyError异常|
|S.isdisjoint(T) | 如果集合S与T没有相同元素，返回True|
|len(S) | 返回集合S元素个数|
|x in S |如果x是S的元素，返回True，否则返回False|
|x not in S |如果x不是S的元素，返回True，否则返回False|

# 字典类型
## 字典类型的基本概念
通过任意键信息查找一组数据中值信息的过程叫映射，Python语言中通过Python语言中的字典可以通过大括号({})建立
```bash
st = {'a'} # set
dic = {'B': "百度", "A": "阿里", "T": "腾讯"} # dict
dic["B"] # '百度'
dic['z'] = '字节跳动'
# {'B': '百度', 'A': '阿里', 'T': '腾讯', 'z': '字节跳动'}
 dic['B'] = '百度中国'
# {'B': '百度中国', 'A': '阿里', 'T': '腾讯', 'z': '字节跳动'}
```
## 字典类型的操作
| 函数和方法 | 描述|
|:------:|:-----:|
|<d>.keys() | 返回所有的键信息|
|<d>.values() | 返回所有的值信息|
|<d>.items() | 返回所有的键值对|
|<d>.get(<key>,<default>) | 键存在则返回相应值，否则返回默认值|
|<d>.pop(<key>,<default>)| 键存在则返回相应值，同时删除键值对，否则返回默认值 |
|<d>.popitem() | 随机从字典中取出一个键值对，以元组(key, value)形式返回|
|<d>.clear() | 删除所有的键值对|
|del <d>[<key>]| 删除字典中某一个键值对|
| <key> in <d> |如果键在字典中返回True，否则返回False|

```bash
dic = {'B': "百度", "A": "阿里", "T": "腾讯"} # dict
dic.keys()
# dict_keys(['B', 'A', 'T', 'z'])
dic.values()
# dict_values(['百度中国', '阿里', '腾讯', '字节跳动'])
dic.items()
# dict_items([('B', '百度中国'), ('A', '阿里'), ('T', '腾讯'), ('z', '字节跳动')])
"A" in dic # True
"阿里" in dic # False
dic.get("A") # "阿里"
dic.get("c", "查找不多") # 查找不到
dic.get("B", "差找不到") # 百度
```
### for...in,默认遍历keys
```bash
for key,value in dic.items():
    print(key)
    print(value)
B
百度中国
A
阿里
T
腾讯
z

for key in dic:
    print(key)
B
A
T
z
```

### lambda函数和sorted的结合
```bash
ls = [3, 2, 1, 6, 5, 4, 2]
print(sorted(ls))
# [1, 2, 2, 3, 4, 5, 6]

dic = {'a': 3,  'f': 9, 'k': 1, 'e': 2,}
sorted(dic, key = lambda item: item[0])
#  ['a', 'e', 'f', 'k']
sorted(dic.items(), key = lambda item: item[0])
# [('a', 3), ('e', 2), ('f', 9), ('k', 1)]
sorted(dic.items(), key = lambda item: item[1])
# [('k', 1), ('e', 2), ('a', 3), ('f', 9)]
sorted(dic.items(), key= lambda item:item[1], reverse = True)
# [('f', 9), ('a', 3), ('e', 2), ('k', 1)]
```