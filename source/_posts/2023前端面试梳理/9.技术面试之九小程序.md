---
title: 技术面试之九小程序
categories: 2023前端面试梳理
tags: 面试题
date: 2023-04-27 09:48:00
---

## 微信小程序 面试题汇总
### 1.简单描述微信小程序相关文件类型
微信小程序项目结构主要有四个文件类型
> * WXML（WeiXin Markup Language）是框架设计的一套标签语言，结合基础组件、事件系统，可以构建出页面的结构。内部主要是微信自己定义的一套组件
> * WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式
> * js 逻辑处理，网络请求
> * json 小程序设置，如页面注册，页面标题及tabBar

### 2.小程序的双向绑定和vue哪里不一样?
```bash
this.setData({
    # 这里设置
})
```

### 3.小程序页面间有哪些传递数据的方法?
**使用全局变量实现数据传递**
在 app.js 文件中定义全局变量 globalData， 将需要存储的信息存放在里面
```bash
# app.js
App({
     # 全局变量
  globalData: {
    userInfo: null
  }
})
```
使用的时候，直接使用 getApp() 拿到存储的信息
**使用 wx.navigateTo 与 wx.redirectTo 的时候，可以将部分数据放在 url 里面，并在新页面 onLoad 的时候初始化**
```bash
# Navigate
wx.navigateTo({
  url: '../pageD/pageD?name=raymond&gender=male',
})

# Redirect
wx.redirectTo({
  url: '../pageD/pageD?name=raymond&gender=male',
})

# pageB.js
...
Page({
  onLoad: function(option){
    console.log(option.name + 'is' + option.gender)
    this.setData({
      option: option
    })
  }
})

```

### 4.小程序的生命周期函数
> * onLoad 页面加载时触发。一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数
> * onShow() 页面显示/切入前台时触发
> * onReady() 页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互
> * onHide() 页面隐藏/切入后台时触发。 如 navigateTo 或底部 tab 切换到其他页面，小程序切入后台等
> * onUnload() 页面卸载时触发。如 redirectTo 或 navigateBack 到其他页面时

### 5.如何实现下拉刷新
首先在全局 config 中的 window 配置 enablePullDownRefresh
在 Page 中定义 onPullDownRefresh 钩子函数,到达下拉刷新条件后，该钩子函数执行，发起请求方法
请求返回后，调用 wx.stopPullDownRefresh 停止下拉刷新

### 6.bindtabp 和 catchtap的区别是什么
**相同点：**首先他们都是作为点击事件函数，就是点击时触发。在这个作用上他们是一样的，可以不做区分
**不同点：**他们的不同点主要是bindtap是不会阻止冒泡事件的，catchtap是阻值冒泡的

### 7.简述下 wx.navigateTo(), wx.redirectTo(), wx.switchTab(), wx.navigateBack(), wx.reLaunch()的区别?
wx.navigateTo()：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面
wx.redirectTo()：关闭当前页面，跳转到新的页面（类似重定向）。但是不允许跳转到 tabbar 页面
wx.switchTab()：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
wx.navigateBack():关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层
wx.reLaunch()：关闭所有页面，打开到应用内的某个页面

### 8.登录流程？
登录流程是调wx.login获取code传给后台服务器获取微信用户唯一标识openid及本次登录的会话密钥（session_key）等）。拿到开发者服务器传回来的会话密钥（session_key）之后，前端要保存wx.setStorageSync('sessionKey', 'value')
持久登录状态：session信息存放在cookie中以请求头的方式带回给服务端，放到request.js里的wx.request的header里
