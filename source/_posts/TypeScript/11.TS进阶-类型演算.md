---
title: 11.TS进阶-类型演算
categories: TypeScript
tags: TypeScript
date: 2020-08-10 20:25:00
---

# 类型演算
> 根据已知的信息，计算出新的类型

## 三个关键字
- typeof

TS中的tspeof,书写的位置在类型约束的位置上
表示：获取某个数据的类型
当typeof作用于类的时候，得到的类型，是该类型的构造函数
```bash
const a: string = 'asdfasdf'
let b: typeof a = 'asdfasd'
# 根据a的类型推导b的类型

class User {
  loginid: string
  loginpwd: string
}
function creatrUser (cls: new () => User): User {
  return new cls();
}
const u = creatrUser(User)

# 或者
function creatrUser (cls: typeof User): User {
  return new cls();
}
```

- keyof

作用于类、接口、类型别名，用于获取其他类型中的所有成员名组成的联合类型
```bash
interface User {
  loginId: string
  loginPwd: string
  age: number
}
function printUserProperty (obj: User, prop: keyof User) {
  console.log(obj[prop])
}
```

- in

```bash
interface User {
  loginId: string
  loginPwd: string
  age: number
}
# 将User的所有属性类型变成字符串，得到一个新类型
type UserString = {
  [p in keyof User]: string
}
const u: UserString = {
  loginId: '12313',
  loginPwd: '1231',
  age: '123'
}
type UserReadonly = {
  readonly [p in keyof User]: User[p]
}
type Partial1<T> = {
  [p in keyof T]?: T[p]
}
const u: Partial1<User> = {
  loginId: 'sdf'
}
```

## TS中预设的类型演算
```bash
Partial<T> # 将类型T中的成员变成可选

Required<T> # 将类型T中的成员变成必填

Readonly<T> # 将类型T中的成员变成只读

Exclude<T, U> # 从T中剔除可以赋值给U的类型

Extract<T, U> # 提取T中可以赋值给U的类型

NonNullable<T> # 从T中剔除null和undefined

ReturnType<T> # 获取函数返回值类型

InstanceType<T> # 获取构造函数类型的实例类型
```