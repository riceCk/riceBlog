---
title: 技术面之八简历网络和浏览器
categories: 2022前端面试梳理
tags: 面试题
date: 2022-04-29 09:48:00
---

### 1、从用户在浏览器输入地址到页面渲染完成期间 都发生了什么
* 查看是否有有效的service worker缓存
* 判断是否有强缓存，也就是未过期的资源，靠expire和cache-control判断
* DNS域名解析
* 进行三次握手 + TLS握手
  > * TLS握手
  > * 客户端请求服务器的证书
  > * 第一次非对称加密，用CA的公钥去解证书签名，如果解出来的hash和证书的信息hash一致则合法
  > * 第二次非对称加密，客户端使用服务器公钥加密随机数
  > * 服务端使用服务端私密解密随机数
  > * 使用随机数进行对此加密
* 向资源发送请求
* 协商缓存，使用if-modified-since和etag与服务器对比，或没有改变取本地缓存，返回的状态码是304
* 取回资源
* 解析网页资源，下载网页中资源
  > html,css,font这三类型的资源优先级最高
* 生成dom树和css树，构造render树
* 重拍重绘合成
* 当DOM的变化引发元素几何属性变化，比如改变元素的宽高，元素的位置，导致浏览器不得不重新计算元素的几何属性，并重新构建渲染树，这个过程为“重排”。完成重排后，要将重新构建的渲染树渲染到屏幕上，这个过程就是“重绘“
* 首次渲染时一定会执行重排，后续如果不改变元素的外形位置尺寸则可以只执行重绘，不执行重排
* 重绘得到的像素使用GPU绘制在页面上，一些特殊的element会单独为一个合成层，合理使用合成层可以提高动画效果
* 触发DOMContentLoaded事件
* 加载图片等外部文件
* 触发load事件
* 瞎子啊preload资源

### 2、如何进行网站性能优化
* 减少HTTP请求：合并文件、CSS精灵、inline Image
* 优化图片：根据实际颜色需要选择色深、压缩

### 3、POST GET 区别
* GET回退是无害，POST会再次提交请求
* GET产生的URL地址可以被收藏，POST不行
* GET请求会被浏览器主动缓存，POST不能除非主动设置
* GET只能进行URL编码，而POST可以支持多种编码方式
* GET请求参数会被完整的保留在浏览器历史记录中，而POST的参数不会被保留
* GET请求在URL中传参是有长度限制的，POST没有
* GET比POST更不安全

### 4、HTTP状态码
* 1xx指示信息-表示请求已经接受，继续处理
* 2xx成功
* 3xx重定向
* 4xx客户端错误
* 5xx服务器错误

### 5、WebSocket理解
WebSocket 是一种网络传输协议，位于OSI模型的应用层，可在单个TCP连接上进行全双工共通信更好的节省服务器资源和宽带达到实时通讯
客户端和服务器只需要完成一次握手，两者之间就可以创建持久性连接，并进行数据传输
> **应用场景**
> * 弹幕
> * 媒体聊天
> * 协同编辑
> * 基于位置的应用

### 6、http协议主要特点
* 简单快速 - url
* 灵活：根据请求头设置不同数据类型
* 无连接：不需要连接，结束自动截掉
* 无状态：第二次访问也不会有状态，犹如初恋

### 7、http报文组成
#### 请求报文
* 请求行
* 请求头
* 空行
* 请求体

#### 响应报文
* 状态行
* 响应头
* 空行
* 相应体

### 8、如何创建Ajax
#### 定外卖的思想
* 手机、电脑----------------->浏览器
* 美团外卖、饿了么等-------->ajax对象
* 打开APP 商家、商品-------->ajax.open(method,url,true)
* 下单（……）--------------->ajax.send()
* 监听外卖信息-------------->onreadystatechage 4
* 开门、验货、处理---------->status == 200 403 503

#### 封装一下
```bash
function ajaxFunc(method, url, data,callback, flag){
  var xhr = null;
  #创建ajax对象
  if(window.XMLHttpRequest){s
    xhr = new XMLHttpRequest();
  }else{# ie兼容
    xhr = new ActiveXObject('Microsoft.XMLHttp')
  }
  #兼容小写，统一转换成大写‘GET’、‘POST’
  method = method.toUpperCase();
  if(method == 'GET'){
    xhr.open(method, url + '?' + data, flag);
    xhr.send();
  }else if(method == 'POST'){
    xhr.open(method, url, flag);
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhr.send(data);
  }
  xhr.onreadystatechange = function(){
    if(xhr.readyState == 4){
      if(xhr.status == 200 || xhr.status == 304){
        callback(xhr.reponseText);
      }else{
        console.log('error')
      }
    }
  }
}
```
