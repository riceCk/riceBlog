---
title: 3.react hooks
categories: React
tags: react
date: 2022-11-15 14:05:00
---

## react hooks

### 使用hooks理由
> * 1.高阶组件为了复用，导致代码层级复杂
> * 2.生命周期的复杂
> * 3.写成fucntion组件，无状态组件，因为需要状态，又改成了class成本高

### 1.useState(保存组件状态)
```bash
const [state, setstate] = useState(initialState)
```
**案例**
```bash
export default function App() {
    const [text, setText] = useState('')
  return (
    <div>
        <input value={text} onChange={(e) => setText(e.target.value)} />
        <button onClick={() => {
            console.log(text)
        }}>点击</button>
    </div>
  )
}
```

### 2.useEffect 处理回调
```bash
useEffect(() => {
    return () => {}
}, [依赖的状态；空数组，表示不依赖])
```
**案例1**
```bash
const [list, setlist] = useState([])
# 只会请求一遍
useEffect(() => {
    axios.get('/test.json').then(res => {
        setlist(res.data.data.films)
    })
}, [])
return (
    <div>
        App
        {
            list.map(item => (
                <li key={item.filmId}>{item.name}</li>
            ))
        }
    </div>
    
)
```

**案例2**
```bash
const [name, setName] = useState('kerwin')
useEffect(() => {
    setName(name.substring(0, 1).toUpperCase() + name.substring(1))
}, [name]) # 依赖name更新
return (
    <div>
        App - {name}
        <button onClick={() => setName('xiaoming')}>点击</button>
    </div>
)
```