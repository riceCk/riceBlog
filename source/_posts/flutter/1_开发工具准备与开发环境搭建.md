---
title: 1_开发工具准备与开发环境搭建
categories: flutter
tags: flutter
date: 2021-07-27 09:47:00
---

# Android Studio安装

## 系统要求
在Window上要安装并运行Flutter要满足以下最低要求
* 操作系统Window 7 SP1或者更新系统
* 磁盘空间：400MB
* 工具：Flutter 依赖下面这些命令行工具：
    Window PowerShell 5.0 Window 10 已经预装了这个工具；
    Git工具 

## 安装Android Studio
* [Android Studio 下载](https://developer.android.com/studio)
* [Android Studio 谷歌镜像](https://developer.android.google.cn/studio)
* [Android Studio 开发文档](https://developer.android.google.cn/studio/intro)
建议（别问）打开Android Studio 谷歌镜像下载`Android Studio downloads`大标题下面的**Windows**

## 为了Android Studio 安装Flutter和Dart插件
* 打开Android Studio
* 打开Preferences > Plugins(macOS),File > Settings > Plugins (Window & Linux)
* 选择 Browse repositories, 搜索Flutter plugin然后点击安装

# Android开发环境配置
参考文档,文献目录`编译和运行您的应用`
[Android模拟器配置](https://developer.android.google.cn/studio/run)

## 安装Android模拟
### （1）创建AVD
[创建AVD](https://developer.android.google.cn/studio/run/managing-avds#createavd)
如需新建 AVD，请按以下步骤操作：
* 1.依次点击 Tools > AVD Manager 以打开 AVD 管理器。
* 2.点击 AVD Manager 对话框底部的 Create Virtual Device。
    系统会显示 Select Hardware 页面。
* 3.选择硬件配置文件，然后点击 Next。
    如果您未看到自己所需的硬件配置文件，您可以创建或导入一个硬件配置文件。
    系统会显示 System Image 页面。
* 4.选择针对特定 API 级别的系统映像，然后点击 Next。
* 5.根据需要更改 AVD 属性，然后点击 Finish。
    点击 Show Advanced Settings 以显示更多设置，如皮肤。
    新的 AVD 会显示在 Your Virtual Devices 页面或 Select Deployment Target 对话框中。

### (2)开启硬件加速
**一般创建模拟器的时候最后一步是默认硬件加速的**
在 AVD Manager 中配置图形加速
要为 AVD 配置图形加速，请按以下步骤操作：
* 1.打开 [AVD 管理器](https://developer.android.google.cn/studio/run/managing-avds#viewing)。
* 2.创建新的 AVD 或修改现有的 AVD。
* 3.在 [Verify Configuration](https://developer.android.google.cn/studio/run/managing-avds#verifyconfigpage) 页面上，找到 Emulated Performance 部分。
* 4.为 Graphics 选项选择一个值。
* 5.点击 Finish。

### 无法启动模拟器
```base
emulator: ERROR: x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly install and usable.
CPU acceleration status: HAXM is not installed on this machine.
```
**解决方案：选择Tools>SDK Manager>SDK Tools, 安装HAXM即可**

## Android开发环境配置

`系统环境变量`中添加

```bash
ANDROID_HOME=C:\Users\kevin\AppData\Local\Android\Sdk
```

`系统环境变量`path中添加:
```bash
%ANDROID_HOME%\emulator
%ANDROID_HOME%\tools
%ANDROID_HOME%\platform-tool
```


# 设置Flutter相关配置

**下面配置文档摘要于：[Flutter中文网](https://flutterchina.club/setup-windows/)**
## 设置Flutter镜像（非必须）
由于在国内访问Flutter可能受到限制，Flutter官方为中国开发者搭建了临时镜像，大家可以将如下环境变量加入到用户环境变量钟：
1、`计算机` -> `属性` -> `高级系统设置`-> `环境变量`，打开环境变量设置框。
2、在`用户变量`下，选择新建环境变量，添加如下的两个环境变量和值：
```bash
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
```
注意：此镜像为临时镜像，并不能保证一直可用，大家可以从[Using Flutter in China](https://flutter.dev/community/china)上获取有关镜像服务器的最新动态


## 获取Flutter SDK
1.点击[Flutter官网](https://flutter.dev/docs/development/tools/sdk/releases#windows)下载最新的可用安装包
2.解压安装包到你想安装的目录，如：`D:\Android\flutter`
```bash
注意，不要讲flutter安装到需要一些高级权限的路径如`C:\Program Files\`等。
```
3.在Flutter安装目录的flutter文件下找到`flutter_console.bat`,点击双击运行并启动flutter命令行：
接下来，你就可以在Flutter命令行运行flutter命令了

## 设置环境变量
要在终端运行flutter命令，你需要在Window的`环境变量`>`用户变量`添加一下环境变量到系统`Path`:
* 如果该条目存在，追加`D:\Android\flutter\bin`的全路径，使用;作为分隔符号；
* 反之没用该条目进行创建
* 在“用户变量”下检查是否有名为”PUB_HOSTED_URL”和”FLUTTER_STORAGE_BASE_URL”的条目，如果没有，也添加它们。

## 运行 flutter doctor
**在命令提示符或PowerShell窗口中运行此命令。目前，Flutter不支持像Git Bash这样的第三方shell。**
```bash
 flutter doctor
```
该命令检查您的环境并在终端窗口中显示报告。Dart SDK已经在捆绑在Flutter里了，没有必要单独安装Dart。 仔细检查命令行输出以获取可能需要安装的其他软件或进一步需要执行的任务（以粗体显示）
例如: 安装配置成功的`[√]`,失败有问题的会`X`
```bash
[√] Flutter (Channel stable, 2.5.1, on Microsoft Windows [Version 10.0.19041.1237], locale zh-CN)
[!] Android toolchain - develop for Android devices (Android SDK version 31.0.0)
    X cmdline-tools component is missing # 缺少cmdline-tools组件
      Run `path/to/sdkmanager --install "cmdline-tools;latest"`
      See https://developer.android.com/studio/command-line for more details.
    X Android license status unknown. # Android license status unknown
      Run `flutter doctor --android-licenses` to accept the SDK licenses.
      See https://flutter.dev/docs/get-started/install/windows#android-setup for more details.
[√] Chrome - develop for the web
[√] Android Studio (version 2020.3)
[√] Connected device (1 available)
```
## 处理上面的问题
[参考文档](https://flutter-examples.com/flutter-command-line-tools-component-is-missing/?utm_source=rss&utm_medium=rss&utm_campaign=flutter-command-line-tools-component-is-missing)
* 1.打开Android Studio软件，`Tools` > `SDK Manager`
* 2.`Android SDK` > `SDK Tools` > 然后勾选**Android SDK Command-line Tools(latest)**并下载安装。
* 3.控制台运行`flutter doctor --android-licenses`然后一路yyyy（yyds）

# 创建flutter项目
以上流程都走完了，就可以创建一个项目了
## 使用Android Studio创建
file > New > New flutter Probjet
## 使用命令创建Flutter项目
```bash
flutter create my_app
```